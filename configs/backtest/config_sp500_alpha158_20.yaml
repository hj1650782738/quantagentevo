backtest:
  backtest:
    account: 100000000
    benchmark: spx
    end_time: '2025-12-25'
    exchange_kwargs:
      close_cost: 0.0015
      deal_price: close
      limit_threshold: 0.1
      min_cost: 5
      open_cost: 0.0005
    start_time: '2022-01-01'
  strategy:
    class: TopkDropoutStrategy
    kwargs:
      hold_thresh: 1
      n_drop: 5
      signal:
      - model_prediction
      topk: 50
    module_path: qlib.contrib.strategy
data:
  end_time: '2025-12-26'
  market: sp500
  provider_uri: /home/tjxy/.qlib/qlib_data/us_data
  start_time: '2016-01-01'
dataset:
  infer_processors:
  - class: Fillna
    kwargs:
      fields_group: feature
  - class: ProcessInf
  - class: CSRankNorm
    kwargs:
      fields_group: feature
  - class: CSRankNorm
    kwargs:
      fields_group: label
  label: Ref($close, -2) / Ref($close, -1) - 1
  learn_processors:
  - class: Fillna
    kwargs:
      fields_group: feature
  - class: ProcessInf
  - class: DropnaLabel
  - class: CSRankNorm
    kwargs:
      fields_group: feature
  - class: CSRankNorm
    kwargs:
      fields_group: label
  segments:
    test:
    - '2022-01-01'
    - '2025-12-26'
    train:
    - '2016-01-01'
    - '2020-12-31'
    valid:
    - '2021-01-01'
    - '2021-12-31'
experiment:
  name: backtest_sp500_alpha158_20
  output_dir: backtest_results_sp500_alpha158_20
  output_metrics_file: backtest_metrics.json
  recorder: backtest_sp500_recorder
factor_calculation:
  output_dir: /mnt/DATA/quantagent/QuantaAlpha/computed_factors_sp500_alpha158_20
factor_source:
  type: alpha158_20
llm:
  cache_dir: /mnt/DATA/quantagent/QuantaAlpha/factor_cache_sp500_alpha158_20
  enabled: false
  model: gpt-4
  temperature: 0.0
model:
  params:
    colsample_bytree: 0.8879
    early_stopping_round: 50
    feature_fraction_bynode: 0.8
    lambda_l1: 205.6999
    lambda_l2: 580.9768
    learning_rate: 0.1
    loss: mse
    max_depth: 8
    min_child_samples: 100
    num_boost_round: 500
    num_leaves: 210
    num_threads: 20
    random_state: 42
    seed: 42
    subsample: 0.8789
  type: lgb
random_seed: 42
